<h1>本の編集</h1>
<%= form_with model: @book, local: true do |form| %>
  <% if @book.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@book.errors.count, "error") %> が発生しました:</h2>
      <ul>
        <% @book.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div>
    <%= form.label :title, "題名" %>
    <%= form.text_field :title %>
  </div>

  <div>
    <%= form.label :author, "著者" %>
    <%= form.text_field :author %>
  </div>

  <div class="actions">
    <%= link_to "キャンセル", @book %>
    <%= form.submit "更新", class: "btn btn-primary" %>
  </div>
<% end %>
<% if current_user &&
          (current_user.respond_to?(:admin?) && current_user.admin? ||
          @book.user_id == current_user.id) %>
  <hr>
  <div class="actions">
    <%= link_to "本を削除する",
              book_path(@book),
              data: { turbo_method: :delete, turbo_confirm: "削除すると関連する情報もすべて失われます。本当に削除してよろしいですか？" },
              class: "btn btn-danger" %>
  </div>
<% end %>